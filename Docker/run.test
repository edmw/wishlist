#!/bin/bash
version=$1

if [[ ! -d "./Wishlist.xcodeproj" ]] ; then
  echo "Script must be run in project directory"; exit 1
fi
if [[ ! $version =~ ^[0-9]+(\.[0-9]+){2,2}(\-RC[0-9]+){0,1}$ ]];
then
  echo "Script must be run with version number as argument"; exit 1
fi

echo " #### Running Docker Compose for project Wishlist with version $version"

APPVERSION=$version DBHOST=db-test docker-compose -p wishlist -f Docker/docker-compose.test up --abort-on-container-exit
