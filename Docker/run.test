#!/bin/bash
project=Wishlist
version=$1
label=$(echo "$project" | tr "[:upper:]" "[:lower:]")

echo

if [[ ! -d "./$project.xcodeproj" ]] ; then
  echo "ü§î Script must be run in project directory ..."; exit 1
fi
if [[ ! $version =~ ^[0-9]+(\.[0-9]+){2,2}(\-RC[0-9]+){0,1}$ ]];
then
  echo "ü§î Script must be run with version number as argument ..."; exit 1
fi

echo "üê≥ RUNNING Docker TEST compose for project $project with version $version"

APPVERSION=$version DBHOST=db-test docker-compose -p $label -f Docker/docker-compose.test up --abort-on-container-exit
