version: "3.3"
services:
  app-test:
    container_name: wishlist-app-test
    image: "wishlist:${APPVERSION}-test"
    environment:
      SITE_URL: "http://localhost:8080"
      SITE_RELEASE: "beta"
      SITE_ACCESS: "all"
      DBHOST: "${DBHOST}"
      DBPORT: "${DBPORT}"
      DBNAME: "${DBNAME}"
      DBUSERNAME: "${DBUSERNAME}"
      DBPASSWORD: "${DBPASSWORD}"
      GOOGLE_CLIENT_ID: "${GOOGLE_CLIENT_ID}"
      GOOGLE_CLIENT_SECRET: "${GOOGLE_CLIENT_SECRET}"
      NETID_CLIENT_ID: "${NETID_CLIENT_ID}"
      NETID_CLIENT_SECRET: "${NETID_CLIENT_SECRET}"
      CLOUDIMG_TOKEN: "${CLOUDIMG_TOKEN}"
      EMAIL_SMTP_HOSTNAME: "${EMAIL_SMTP_HOSTNAME}"
      EMAIL_SMTP_USERNAME: "${EMAIL_SMTP_USERNAME}"
      EMAIL_SMTP_PASSWORD: "${EMAIL_SMTP_PASSWORD}"
      EMAIL_SENDER_ADDRESS: "${EMAIL_SENDER_ADDRESS}"
      EMAIL_SENDER_NAME: "${EMAIL_SENDER_NAME}"
      PUSHOVER_APPLICATION_TOKEN: "${PUSHOVER_APPLICATION_TOKEN}"
      DEVELOPMENT_LOG_LEVEL: "${DEVELOPMENT_LOG_LEVEL}"
      RELEASE_LOG_LEVEL: "${RELEASE_LOG_LEVEL}"
    links:
      - db-test
    depends_on:
      - db-test
    networks:
      - web-test
  db-test:
    container_name: wishlist-db-test
    image: mysql:5
    environment:
      MYSQL_ROOT_PASSWORD: wishlist
      MYSQL_USER: wishlist
      MYSQL_PASSWORD: wishlist
      MYSQL_DATABASE: wishlist
    networks:
      - web-test
networks:
    web-test:
